# Requirements Document

## Introduction

Данная функциональность добавляет временные фильтры ко всем графикам дашборда для анализа изменений на рынке российских БПИФ во времени. Это позволит пользователям отслеживать динамику рынка, выявлять тренды и анализировать влияние различных событий на структуру и поведение фондов.

## Requirements

### Requirement 1

**User Story:** Как аналитик рынка БПИФ, я хочу видеть временные фильтры на каждом графике дашборда, чтобы анализировать изменения рыночной структуры в различные периоды времени.

#### Acceptance Criteria

1. WHEN пользователь открывает дашборд THEN система SHALL отображать временные фильтры на каждом графике
2. WHEN пользователь выбирает временной период THEN система SHALL обновлять данные графика для выбранного периода
3. WHEN пользователь изменяет временной фильтр THEN система SHALL сохранять выбранный период для всех графиков на странице

### Requirement 2

**User Story:** Как исследователь рынка, я хочу иметь предустановленные временные периоды (1 месяц, 3 месяца, 6 месяцев, 1 год, все время), чтобы быстро переключаться между популярными интервалами анализа.

#### Acceptance Criteria

1. WHEN пользователь видит временной фильтр THEN система SHALL предоставлять кнопки быстрого выбора: "1М", "3М", "6М", "1Г", "Все"
2. WHEN пользователь нажимает на кнопку быстрого выбора THEN система SHALL автоматически устанавливать соответствующий период
3. WHEN пользователь выбирает "Все время" THEN система SHALL показывать данные за весь доступный период

### Requirement 3

**User Story:** Как аналитик, я хочу иметь возможность выбрать произвольный временной диапазон с помощью календаря, чтобы анализировать данные за конкретные периоды, связанные с рыночными событиями.

#### Acceptance Criteria

1. WHEN пользователь нажимает на поле даты THEN система SHALL открывать календарь для выбора даты
2. WHEN пользователь выбирает начальную и конечную даты THEN система SHALL валидировать корректность диапазона
3. IF конечная дата раньше начальной THEN система SHALL показывать сообщение об ошибке
4. WHEN пользователь подтверждает выбор дат THEN система SHALL применять фильтр ко всем графикам

### Requirement 4

**User Story:** Как пользователь дашборда, я хочу видеть индикатор загрузки при изменении временного фильтра, чтобы понимать, что система обрабатывает мой запрос.

#### Acceptance Criteria

1. WHEN пользователь изменяет временной фильтр THEN система SHALL показывать индикатор загрузки на графике
2. WHEN данные загружены THEN система SHALL скрывать индикатор загрузки
3. IF загрузка данных занимает более 5 секунд THEN система SHALL показывать сообщение о задержке

### Requirement 5

**User Story:** Как аналитик рынка, я хочу видеть синхронизацию временных фильтров между всеми графиками, чтобы анализировать данные за один и тот же период на всех визуализациях.

#### Acceptance Criteria

1. WHEN пользователь изменяет временной фильтр на одном графике THEN система SHALL автоматически применять тот же период ко всем остальным графикам
2. WHEN система обновляет временной фильтр THEN все графики SHALL показывать данные за одинаковый период
3. WHEN пользователь обновляет страницу THEN система SHALL сохранять последний выбранный временной период

### Requirement 6

**User Story:** Как исследователь, я хочу видеть информацию о доступном диапазоне данных для каждого графика, чтобы понимать ограничения временного анализа.

#### Acceptance Criteria

1. WHEN пользователь наводит курсор на временной фильтр THEN система SHALL показывать подсказку с доступным диапазоном данных
2. WHEN данные для выбранного периода отсутствуют THEN система SHALL показывать соответствующее сообщение
3. WHEN пользователь выбирает период без данных THEN система SHALL предлагать ближайший доступный период

### Requirement 7

**User Story:** Как пользователь, я хочу видеть влияние временного фильтра на все типы графиков (потоки капитала, настроения рынка, ротация секторов, детальный состав фондов), чтобы получать комплексный анализ за выбранный период.

#### Acceptance Criteria

1. WHEN пользователь применяет временной фильтр THEN система SHALL обновлять график потоков капитала для выбранного периода
2. WHEN пользователь применяет временной фильтр THEN система SHALL обновлять график настроений рынка для выбранного периода
3. WHEN пользователь применяет временной фильтр THEN система SHALL обновлять график ротации секторов для выбранного периода
4. WHEN пользователь применяет временной фильтр THEN система SHALL обновлять график детального состава фондов для выбранного периода
5. WHEN пользователь применяет временной фильтр THEN система SHALL обновлять график потоков фондов для выбранного периода