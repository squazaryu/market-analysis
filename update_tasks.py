"""
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ tasks.md —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
"""

from datetime import datetime

def update_tasks_with_api_testing():
    """
    –î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ API –≤ tasks.md
    """
    
    new_content = f"""

### üì° –≠–¢–ê–ü 5: –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï API –ò–°–¢–û–ß–ù–ò–ö–û–í *(–ó–ê–í–ï–†–®–ï–ù {datetime.now().strftime('%d.%m.%Y')})*

#### ‚úÖ 5.1 –ê–Ω–∞–ª–∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API
- [x] **–°–æ–∑–¥–∞–Ω api_research.py** - –º–æ–¥—É–ª—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö API
- [x] **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω—ã 10+ API –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**: MOEX, –¶–ë –†–§, Tinkoff, Yahoo Finance, Finam –∏ –¥—Ä.
- [x] **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** –∫–∞–∂–¥–æ–≥–æ API —Å –æ—Ü–µ–Ω–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
- [x] **–°–æ–∑–¥–∞–Ω api_integration_guide.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### ‚úÖ 5.2 –û—Ü–µ–Ω–∫–∞ API –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- [x] **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏**: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ, —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø–ª–∞—Ç–Ω—ã–µ
- [x] **–ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö**: —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—ã–Ω–æ–∫, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏–∫–∞
- [x] **–û—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏**: —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –ª–∏–º–∏—Ç—ã, –∫–∞—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [x] **–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑** –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

#### ‚úÖ 5.3 –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [x] **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø–æ–¥—Ö–æ–¥**: primary, secondary, fallback –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- [x] **–ú–µ—Ö–∞–Ω–∏–∑–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏** –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [x] **–ü–ª–∞–Ω –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è** –Ω–∞ 8+ –Ω–µ–¥–µ–ª—å
- [x] **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

#### ‚úÖ 5.4 –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ *(–í–´–ü–û–õ–ù–ï–ù–û {datetime.now().strftime('%d.%m.%Y %H:%M')})*
- [x] **–ó–∞–ø—É—Å–∫ api_research.py** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- [x] **–°–æ–∑–¥–∞–Ω–∏–µ run_api_testing.py** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
- [x] **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** –æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–µ API
- [x] **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- [x] **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –≤ api_testing_results.png

---

## üöß –¢–ï–ö–£–©–ò–ï –ó–ê–î–ê–ß–ò (–í –†–ê–ë–û–¢–ï)

### üöß 6.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö API *(–°–õ–ï–î–£–Æ–©–ò–ô –≠–¢–ê–ü)*
- [ ] **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –¶–ë –†–§ API** –¥–ª—è –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –∏ –∫–ª—é—á–µ–≤–æ–π —Å—Ç–∞–≤–∫–∏
- [ ] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tinkoff API** –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —Ç–æ–∫–µ–Ω–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ Yahoo Finance** —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- [ ] **–°–æ–∑–¥–∞–Ω–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [ ] **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö** –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

"""
    
    try:
        # –ß–∏—Ç–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
        with open('/Users/tumowuh/Desktop/market analysis/tasks.md', 'r', encoding='utf-8') as f:
            content = f.read()
        
        # –ù–∞—Ö–æ–¥–∏–º –º–µ—Å—Ç–æ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ (–ø–æ—Å–ª–µ –≠–¢–ê–ü 4)
        if "### üîß –≠–¢–ê–ü 4:" in content:
            # –í—Å—Ç–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —ç—Ç–∞–ø –ø–æ—Å–ª–µ –≠–¢–ê–ü 4
            parts = content.split("---\n\n## üöß –¢–ï–ö–£–©–ò–ï –ó–ê–î–ê–ß–ò")
            if len(parts) >= 2:
                updated_content = parts[0] + new_content + "\n---\n\n## üöß –¢–ï–ö–£–©–ò–ï –ó–ê–î–ê–ß–ò" + parts[1]
                
                # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
                with open('/Users/tumowuh/Desktop/market analysis/tasks.md', 'w', encoding='utf-8') as f:
                    f.write(updated_content)
                
                print("‚úÖ –§–∞–π–ª tasks.md —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API")
                return True
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ tasks.md: {e}")
        
        # –°–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
        backup_path = f'/Users/tumowuh/Desktop/market analysis/tasks_api_update_{datetime.now().strftime("%Y%m%d_%H%M%S")}.md'
        with open(backup_path, 'w', encoding='utf-8') as f:
            f.write(f"# –û–ë–ù–û–í–õ–ï–ù–ò–Ø TASKS.MD - API –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï\n{new_content}")
        
        print(f"üìù –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏: {backup_path}")
        return False

if __name__ == "__main__":
    update_tasks_with_api_testing()